(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const p=document.querySelector("gmp-map");let r;document.querySelector("gmp-advanced-marker");let w,u,d;async function P(){const{Map:s,InfoWindow:n}=await google.maps.importLibrary("maps"),{LatLng:a}=await google.maps.importLibrary("core");r=p.innerMap,r.setOptions({mapTypeControl:!1}),u=document.querySelector(".type-select"),u.addEventListener("change",()=>{b()}),d=new n,google.maps.event.addListenerOnce(r,"idle",()=>{b()})}async function b(){const{Place:s,SearchNearbyRankPreference:n}=await google.maps.importLibrary("places"),{AdvancedMarkerElement:a}=await google.maps.importLibrary("marker"),{spherical:c}=await google.maps.importLibrary("geometry");w=p.center;let e=r.getBounds();const t=e.getNorthEast(),i=e.getSouthWest(),v=c.computeDistanceBetween(t,i),M=Math.min(v/2,5e4),E={fields:["displayName","location","formattedAddress","googleMapsURI"],locationRestriction:{center:w,radius:M},includedPrimaryTypes:[u.value],maxResultCount:5,rankPreference:n.POPULARITY},{places:f}=await s.searchNearby(E);if(f.length){const{LatLngBounds:N}=await google.maps.importLibrary("core"),g=new N;for(const o of p.querySelectorAll("gmp-advanced-marker"))o.remove();f.forEach(o=>{if(!o.location)return;g.extend(o.location);const y=new a({map:r,position:o.location,title:o.displayName}),m=document.createElement("div"),h=document.createElement("div");h.textContent=o.formattedAddress||"";const L=document.createElement("div");if(L.textContent=o.id,m.append(h,L),o.googleMapsURI){const l=document.createElement("a");l.href=o.googleMapsURI,l.target="_blank",l.textContent="View Details on Google Maps",m.appendChild(l)}y.addListener("gmp-click",()=>{r.panTo(o.location),O(o.displayName,m,y)})}),r.fitBounds(g,100)}else console.log("No results")}function O(s,n,a){d.setContent(n),d.setHeaderContent(s),d.open({anchor:a})}P();
