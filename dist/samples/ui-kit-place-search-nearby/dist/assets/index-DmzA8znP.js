(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();const o=document.querySelector("gmp-map"),p=document.querySelector("gmp-place-list"),u=document.querySelector(".type-select"),d=document.querySelector("gmp-place-details"),f=document.querySelector("gmp-place-details-place-request");let c={},l;async function y(){await google.maps.importLibrary("places");const{LatLngBounds:s}=await google.maps.importLibrary("core"),{InfoWindow:n}=await google.maps.importLibrary("maps"),{spherical:i}=await google.maps.importLibrary("geometry");l=new n;let r;function e(t){const m=i.computeDistanceBetween(t.getNorthEast(),t.getSouthWest())/2,g=Math.min(m,5e4);return{center:t.getCenter(),radius:g}}h(),o.innerMap.setOptions({mapTypeControl:!1,clickableIcons:!1}),d.addEventListener("gmp-load",t=>{o.innerMap.fitBounds(d.place.viewport,{top:500,left:400})}),u.addEventListener("change",t=>{for(r in c)c[r].map=null;c={},u.value&&(p.style.display="block",p.configureFromSearchNearbyRequest({locationRestriction:e(o.innerMap.getBounds()),includedPrimaryTypes:[u.value]}).then(L),p.addEventListener("gmp-placeselect",({place:a})=>{c[a.id].click()}))})}async function L(){const{AdvancedMarkerElement:s}=await google.maps.importLibrary("marker"),{LatLngBounds:n}=await google.maps.importLibrary("core"),i=new n;p.places.length>0&&p.places.forEach(r=>{let e=new s({map:o.innerMap,position:r.location});c[r.id]=e,i.extend(r.location),e.addListener("gmp-click",t=>{l.isOpen&&l.close(),f.place=r.id,d.style.display="block",d.style.width="350px",l.setOptions({content:d}),l.open({anchor:e,map:o.innerMap})}),o.innerMap.setCenter(i.getCenter()),o.innerMap.fitBounds(i)})}async function h(){const{LatLng:s}=await google.maps.importLibrary("core");navigator.geolocation?navigator.geolocation.getCurrentPosition(n=>{const i=new s(n.coords.latitude,n.coords.longitude);o.innerMap.panTo(i),o.innerMap.setZoom(14)},()=>{console.log("The Geolocation service failed."),o.innerMap.setZoom(14)}):(console.log("Your browser doesn't support geolocation"),o.innerMap.setZoom(14))}y();
